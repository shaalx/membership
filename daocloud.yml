image: daocloud/ci-golang:1.4

services:
    - mongodb

env:
    - MYENV = /gopath/app
    - GOPATH = /go
    - MY_ENV = /gopath/app
    - MONGODB_PORT = tcp://10.10.72.139:27017
    - MONGODB_PORT_27017_TCP = tcp://10.10.72.139:27017
    - MONGODB_PORT_27017_TCP_ADDR = 10.10.72.139
    - MONGODB_PORT_27017_TCP_PROTO = tcp
    - MONGODB_PORT_27017_TCP_PORT = 27017
    - MONGODB_INSTANCE_NAME = IEyTj8hYrUIKgMfi
    - MONGODB_PASSWORD = pPLoK1IkMS82cq95e
    - MONGODB_USERNAME = uMNEZzBVHh8I9YfP

install:
    - echo $MYENV

before_script:
    - echo $MYENV

script:
    - echo $MYENV
    - echo "This is an script segment"
    - echo "Run test cases here"
    - ping -c 2 mongodb
    - export GOPATH=$PWD
    - export PATH=$PATH:/usr/local/go/bin:$GOPATH/bin
    - sudo apt-get update
    - sudo apt-get -y install bzr
    - go get github.com/shaalx/membership
    - go test -v 
    - go test -v ./db